---
id: DS-012
title: Smart Story Creation
type: feature
epic: EPIC-003
status: done
sprint: phase-3
size: M
assignee: ""
dependencies:
  - DS-002
  - DS-011
created: 2025-11-26
updated: 2025-11-28
---

# Smart Story Creation

## Description
Full-featured story creation command with context-aware defaults, dependency suggestions, and epic auto-linking.

## Acceptance Criteria

### MVP
- [ ] `devstories.createStory` command registered
- [ ] Prompts for Story title
- [ ] Epic picker: Shows list of existing epics
- [ ] Type picker: feature / bug / task / chore
- [ ] Size picker: XS / S / M / L / XL (default: M)
- [ ] Generates unique Story ID based on config prefix
- [ ] Creates markdown file in `stories/` folder
- [ ] Applies template based on selected type
- [ ] Opens the newly created file in editor
- [ ] Tree view refreshes to show new story

### Enhanced
- [ ] **Auto-link to epic**: Append `[[STORY-ID]]` to parent epic's Stories section
- [ ] **Context-aware "Files to Modify"**: If invoked from a file, offer to add current file path
- [ ] **Dependency picker**: Multi-select from recent/related stories
- [ ] **Size hint**: Suggest size based on type (bugs→S/M, features→M/L)
- [ ] **Duplicate detection**: Warn if title is >80% similar to existing story
- [ ] **Sprint inheritance**: Default to epic's sprint, or current sprint from config

## Technical Notes
- Epic picker: `vscode.window.showQuickPick()` with epic titles
- Type picker with icons: `{ label: "$(lightbulb) Feature", value: "feature" }`
- Duplicate detection: Simple Levenshtein distance or word overlap
- Auto-link: Read epic file, find `## Stories` section, append link

## User Flow

```
1. Cmd+Shift+P → "DevStories: Create Story"
2. Enter title: "Add dark mode toggle"
3. Select epic: [EPIC-003] Phase 3: Commands
4. Select type: $(lightbulb) Feature
5. Select size: M (suggested)
6. [Optional] Add dependencies? → Multi-select picker
7. → File created, opened, tree refreshed
8. → Epic file updated with [[DS-XXX]] link
```

## Story Template Variables

| Variable | Source |
|----------|--------|
| `{{ID}}` | Auto-generated |
| `{{TITLE}}` | User input |
| `{{TYPE}}` | User selection |
| `{{EPIC}}` | User selection |
| `{{SPRINT}}` | Epic's sprint or config.current |
| `{{SIZE}}` | User selection |
| `{{DATE}}` | Today (YYYY-MM-DD) |
| `{{TEMPLATE_BODY}}` | From config.yaml templates |
