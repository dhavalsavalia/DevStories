---
id: DS-014
title: Template System + Library
type: feature
epic: EPIC-003
status: todo
sprint: phase-3
size: M
assignee: ""
dependencies:
  - DS-012
created: 2025-11-26
updated: 2025-11-28
---

# Template System + Library

## Description
Flexible template system with per-type defaults, bundled templates for common patterns, and ability to save custom templates from existing stories.

## Acceptance Criteria

### MVP
- [ ] Reads `templates` section from `config.yaml`
- [ ] Applies template based on story type (feature/bug/task/chore)
- [ ] Substitutes variables: `{{DATE}}`, `{{TITLE}}`, `{{ID}}`
- [ ] Falls back to built-in default if config template missing
- [ ] Supports multi-line YAML templates

### Enhanced
- [ ] **Bundled template library**: Pre-built templates for common patterns:
  - `api-endpoint`: REST endpoint implementation checklist
  - `react-component`: Component with props, tests, storybook
  - `db-migration`: Migration steps, rollback plan
  - `bug-investigation`: Repro steps, root cause, fix verification
- [ ] **Template picker**: When creating story, option to "Use template..." shows library
- [ ] **Save as template**: Right-click story in tree â†’ "Save as Template"
  - Saves to `.devstories/templates/` as reusable `.md` file
- [ ] **Template variables**: Extended variable support:
  - `{{DATE}}` - Today's date
  - `{{PROJECT}}` - From config.yaml
  - `{{AUTHOR}}` - From git config or VS Code setting
  - `{{CURSOR}}` - Where cursor lands after creation

## Technical Notes
- Template library stored in extension's `resources/templates/`
- Custom templates in `.devstories/templates/` (user-created)
- Variable substitution via simple regex replace
- Cursor position: Use snippet syntax `$0` for final cursor position

## Built-in Templates

### Feature (default)
```markdown
## User Story
As a [user], I need [feature] so that [benefit].

## Acceptance Criteria
- [ ] $0

## Technical Notes

## Files to Modify
```

### Bug (default)
```markdown
## Bug Description

## Steps to Reproduce
1. $0

## Expected Behavior

## Actual Behavior

## Root Cause Analysis

## Fix Verification
- [ ] Bug no longer reproduces
- [ ] No regression in related functionality
```

### API Endpoint (library)
```markdown
## Endpoint
`[METHOD] /api/v1/[resource]`

## Request
- Headers:
- Body:

## Response
- Success (200):
- Error cases:

## Implementation Checklist
- [ ] Route definition
- [ ] Controller logic
- [ ] Input validation
- [ ] Error handling
- [ ] Unit tests
- [ ] Integration tests
- [ ] API documentation
```

### React Component (library)
```markdown
## Component
`<{{TITLE}} />`

## Props
| Prop | Type | Required | Description |
|------|------|----------|-------------|
| | | | |

## Behavior
- [ ] $0

## Implementation Checklist
- [ ] Component file
- [ ] TypeScript types
- [ ] Unit tests
- [ ] Storybook story
- [ ] Accessibility (a11y)
```

## Config Example

```yaml
templates:
  feature: |
    ## User Story
    As a [user], I need [feature] so that [benefit].

    ## Acceptance Criteria
    - [ ]

  bug: |
    ## Bug Description

    ## Steps to Reproduce
    1.

    ## Expected vs Actual

  # Custom templates can reference library
  api: "@library/api-endpoint"
```
