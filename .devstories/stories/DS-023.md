---
id: DS-023
title: Board Filters + Views
type: feature
epic: EPIC-005
status: done
sprint: phase-5
size: M
assignee: ""
dependencies:
  - [[DS-019]]
  - [[DS-020]]
created: 2025-11-26
updated: 2025-11-28
---

# Board Filters + Views

## Description
Comprehensive filtering system for the board view with sprint, epic, type, and assignee filters, plus saved view presets.

## Acceptance Criteria

### MVP
- [x] Sprint filter dropdown in board header
- [x] "All Sprints" shows everything, specific sprint filters cards
- [x] Epic filter: Show stories from selected epic(s)
- [x] Filter state reflected in URL-like state (for persistence)
- [x] Clear filters button

### Enhanced
- [x] **Multi-filter**: Combine sprint + epic + type filters
- [x] **Type filter**: Show only features, bugs, etc.
- [x] **Assignee filter**: Filter by assignee (including "Unassigned")
- [x] **Search**: Quick text search across visible cards
- [ ] **Saved views**: Save current filter combo as named preset (deferred)
  - "Sprint 5 Bugs"
  - "My In-Progress"
  - "Unassigned Tasks"
- [x] **Quick filters**: Chips for common filters (Bugs, Features, Unassigned)

## Technical Notes
- Filters stored in webview state for persistence
- Multi-filter: AND logic (sprint=5 AND type=bug)
- Search: Client-side filter on title/id
- Saved views: Store in workspace settings or config.yaml

## Filter UI Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sprint: [All â–¾]  Epic: [All â–¾]  Type: [All â–¾]  ðŸ” [  ]â”‚
â”‚ [My Items] [Bugs] [Unassigned]           [Clear] [Save]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ To Do (3) â”‚ In Progress (2) â”‚ Review (1) â”‚ Done (5) â”‚â”‚
â”‚ â”‚ ...       â”‚ ...             â”‚ ...        â”‚ ...      â”‚â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Row 1: Dropdowns + search box
Row 2: Quick filter chips + actions

## Filter Logic

```typescript
function filterStories(stories: Story[], filters: Filters): Story[] {
  return stories.filter(story => {
    // Sprint filter
    if (filters.sprint && story.sprint !== filters.sprint) return false;

    // Epic filter
    if (filters.epic && story.epic !== filters.epic) return false;

    // Type filter
    if (filters.type && story.type !== filters.type) return false;

    // Assignee filter
    if (filters.assignee !== undefined) {
      if (filters.assignee === null && story.assignee) return false;
      if (filters.assignee && story.assignee !== filters.assignee) return false;
    }

    // Search filter
    if (filters.search) {
      const searchLower = filters.search.toLowerCase();
      const matches = story.title.toLowerCase().includes(searchLower) ||
                      story.id.toLowerCase().includes(searchLower);
      if (!matches) return false;
    }

    return true;
  });
}
```

## Saved Views (Enhanced)

Store in `.devstories/config.yaml`:

```yaml
saved_views:
  - name: "Sprint 5 Bugs"
    filters:
      sprint: "sprint-5"
      type: "bug"

  - name: "My In-Progress"
    filters:
      assignee: "{{current_user}}"
      status: "in_progress"

  - name: "Backlog Triage"
    filters:
      sprint: null
      status: "backlog"
```

Or in VS Code workspace settings:
```json
{
  "devstories.savedViews": [...]
}
```

## Quick Filters

| Chip | Filter Applied |
|------|----------------|
| My Items | assignee = current user |
| Bugs | type = bug |
| Unassigned | assignee = null |
| Blocked | has unfinished dependencies |
| Stale | updated > 7 days ago |

## Implementation Notes

### Files Created/Modified
- `src/types/webviewMessages.ts`: Added `FilterState` interface, updated `InitPayload` with `sprints[]`
- `src/view/boardViewUtils.ts`: Added filter utilities (`filterStories`, `extractSprints`, `extractAssignees`, `hasActiveFilters`, `countActiveFilters`, `DEFAULT_FILTER_STATE`)
- `src/view/boardView.ts`: Updated `sendInitData` to include sprints list
- `webview/board.css`: Added comprehensive filter bar styles (dropdowns, search, chips, clear button)
- `webview/board.js`: Full filter implementation (state management, UI rendering, event handlers)
- `src/test/unit/boardView.test.ts`: Added 32 new tests for filter utilities

### Architecture Decisions
- **Client-side filtering**: All filtering happens in webview JS for instant feedback
- **Filter state in webview state**: Uses `vscode.setState()` for persistence across reloads
- **AND logic**: Multiple filters combine with AND (sprint=X AND type=bug)
- **Debounced search**: 150ms debounce on search input
- **Quick filter toggles**: Chips toggle the corresponding filter on/off

### Test Results
- Unit tests: 303 passing (32 new)
- Integration tests: 105 passing

## Deferred Decisions

### Saved Views
Deferred saved views feature - requires config.yaml schema changes and picker UI. Can be added in future iteration if users need persistent filter presets.

### "My Items" Quick Filter
Requires knowing current user identity - not implemented as extension doesn't track user. Could use git user.name in future.

### "Blocked" Quick Filter
Would need to resolve dependencies and check their status - adds complexity. Deferred for future.
