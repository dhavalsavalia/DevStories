---
id: DS-027
title: Sprint config schema + parser
type: feature
epic: EPIC-006
status: todo
sprint: backlog
size: S
assignee: ""
dependencies: []
created: 2025-11-28
updated: 2025-11-28
---

# Sprint config schema + parser

## Description

Extend the config.yaml schema to support sprint definitions with metadata (id, name, status, dates, goal) and update the parser to read sprint data.

## Current State

```yaml
sprints:
  current: "sprint-5"   # Just a string reference
```

Sprints are discovered dynamically by scanning story frontmatter.

## Proposed Schema

```yaml
sprints:
  current: "sprint-5"           # Currently active sprint
  list:                         # Defined sprints with metadata
    - id: "sprint-5"
      name: "Sprint 5 - Auth"
      status: active            # planned | active | completed
      start: 2025-11-25
      end: 2025-12-06
      goal: "Complete user authentication"
    - id: "sprint-4"
      name: "Sprint 4 - Board"
      status: completed
      start: 2025-11-11
      end: 2025-11-22
    - id: "backlog"
      name: "Backlog"
      status: active            # Always active, no dates
```

## Acceptance Criteria

- [ ] Add `Sprint` type definition in `src/types/sprint.ts`
- [ ] Add `SprintConfig` interface with current + list
- [ ] Update config parser to read sprints.list
- [ ] Validate sprint status enum (planned | active | completed)
- [ ] Handle missing sprints.list (backward compat)
- [ ] Auto-discover sprints from stories if list not defined
- [ ] Add sprint data to Store
- [ ] Unit tests for sprint parsing and validation

## Technical Notes

### Type Definitions

```typescript
// src/types/sprint.ts
export type SprintStatus = 'planned' | 'active' | 'completed';

export interface Sprint {
  id: string;           // "sprint-5"
  name: string;         // "Sprint 5 - Auth"
  status: SprintStatus;
  start?: string;       // "2025-11-25" (ISO date)
  end?: string;         // "2025-12-06"
  goal?: string;        // "Complete user authentication"
}

export interface SprintConfig {
  current: string | null;
  list: Sprint[];
}
```

### Migration Strategy

1. If `sprints.list` exists → use it
2. If only `sprints.current` → extract sprints from stories
3. If no sprint config → all stories in "backlog"

### Files to Modify

- `src/types/sprint.ts` (new)
- `src/core/parser.ts` (add sprint parsing)
- `src/core/store.ts` (add sprint storage)
- `src/view/boardViewUtils.ts` (update extractSprints)

## Test Cases

1. Parse config with full sprint list
2. Parse config with only current sprint
3. Parse config with no sprint config
4. Validate sprint status values
5. Handle missing optional fields (start, end, goal)
6. Merge discovered sprints with defined list
