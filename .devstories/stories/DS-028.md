---
id: DS-028
title: createSprint command + UI
type: feature
epic: EPIC-006
status: todo
sprint: backlog
size: S
assignee: ""
dependencies:
  - DS-027
created: 2025-11-28
updated: 2025-11-28
---

# createSprint command + UI

## Description

Implement the `devstories.createSprint` command with a guided input flow to create new sprints and write them to config.yaml.

## User Flow

1. **Trigger**: Command palette → "DevStories: Create Sprint"
2. **Step 1**: Enter sprint name
   - InputBox: "Sprint name" (e.g., "Sprint 6" or "Sprint 6 - Payments")
   - Validation: Non-empty, unique ID not already in list
3. **Step 2**: Enter sprint goal (optional)
   - InputBox: "Sprint goal (optional)"
   - Placeholder: "What's the main objective?"
4. **Step 3**: Start date (optional)
   - InputBox: "Start date (YYYY-MM-DD, default: today)"
   - Default to today's date
5. **Step 4**: End date (optional)
   - InputBox: "End date (YYYY-MM-DD, default: 2 weeks)"
   - Default to start + 14 days
6. **Result**: Sprint added to config.yaml with status: "planned"

## Acceptance Criteria

- [ ] Register `devstories.createSprint` command
- [ ] Multi-step input flow with InputBox
- [ ] Validate sprint ID uniqueness
- [ ] Validate date format (YYYY-MM-DD)
- [ ] Write sprint to config.yaml sprints.list
- [ ] Show success notification
- [ ] Handle cancel at any step gracefully
- [ ] Generate sprint ID from name (slugify)

## Technical Notes

### Sprint ID Generation

```typescript
function generateSprintId(name: string): string {
  // "Sprint 6 - Auth" → "sprint-6"
  // "My Custom Sprint" → "my-custom-sprint"
  return name
    .toLowerCase()
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/^-|-$/g, '');
}
```

### Config Writer

```typescript
// src/core/configWriter.ts
async function addSprint(configPath: string, sprint: Sprint): Promise<void> {
  const content = await fs.readFile(configPath, 'utf-8');
  const config = yaml.load(content);

  if (!config.sprints) config.sprints = { list: [] };
  if (!config.sprints.list) config.sprints.list = [];

  config.sprints.list.push(sprint);

  await fs.writeFile(configPath, yaml.dump(config));
}
```

### Files to Create/Modify

- `src/commands/createSprint.ts` (new)
- `src/core/configWriter.ts` (new)
- `src/extension.ts` (register command)
- `package.json` (add command)

## UI Mockup

```
┌─────────────────────────────────────────────────────────────┐
│ Create New Sprint                                           │
│                                                             │
│ Sprint name: [Sprint 6 - Payments________________]          │
│                                                             │
│ [Back]                                       [Next →]       │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ Sprint goal (optional)                                      │
│                                                             │
│ [Implement payment processing flow___________]              │
│                                                             │
│ [← Back]                                    [Next →]        │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ Sprint dates                                                │
│                                                             │
│ Start: [2025-12-01____]  End: [2025-12-14____]             │
│                                                             │
│ [← Back]                                  [Create Sprint]   │
└─────────────────────────────────────────────────────────────┘
```

## Test Cases

1. Create sprint with all fields
2. Create sprint with only name
3. Cancel at each step
4. Duplicate sprint name → error
5. Invalid date format → validation message
6. Sprint added to config.yaml correctly
