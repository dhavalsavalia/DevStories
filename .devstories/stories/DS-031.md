---
id: DS-031
title: Sprint planning webview
type: feature
epic: EPIC-006
status: todo
sprint: backlog
size: L
assignee: ""
dependencies:
  - DS-027
  - DS-028
created: 2025-11-28
updated: 2025-11-28
---

# Sprint planning webview

## Description

A two-panel webview for drag-drop sprint planning. Move stories between backlog and target sprint with capacity tracking.

## User Flow

1. **Trigger**: Command "DevStories: Plan Sprint" or click "Plan" on a sprint
2. **Select Sprint**: If multiple planned sprints, pick one
3. **Planning View Opens**:
   - Left panel: Backlog (unassigned stories)
   - Right panel: Target sprint stories
4. **Drag stories** between panels
5. **Track capacity**: Running total of story points
6. **Save**: Updates all moved stories' sprint field
7. **Optional**: Start sprint from planning view

## UI Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Plan Sprint: Sprint 6 - Payments                               [âœ•]    â”‚
â”‚  Goal: Implement payment processing flow                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€ BACKLOG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€ SPRINT 6 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Filter: [All â–¾] ğŸ” [______]     â”‚  â”‚ Capacity: 13/25 pts         â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚  â”‚
â”‚  â”‚                                 â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚                              â”‚  â”‚
â”‚  â”‚ â”‚ âœ¨ DS-050           [M] 3ptsâ”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ â”‚ Payment form UI             â”‚â—€â”œâ”€â”€â”¤ â”‚ âœ¨ DS-055         [L] 5â”‚   â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ Stripe integration     â”‚   â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚ â”‚ ğŸ› DS-051           [S] 1pt â”‚â”œâ”€â”€â–¶â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ â”‚ Fix decimal rounding        â”‚ â”‚  â”‚ â”‚ ğŸ”§ DS-056         [M] 3â”‚   â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ Payment webhooks       â”‚   â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚ â”‚ ğŸ”§ DS-052           [L] 5ptsâ”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ â”‚ Refund processing           â”‚ â”‚  â”‚ â”‚ ğŸ§¹ DS-057        [XS] 1â”‚   â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ Update config          â”‚   â”‚  â”‚
â”‚  â”‚                                 â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚ 8 stories â€¢ 21 points           â”‚  â”‚ 3 stories â€¢ 9 points         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚  [Cancel]                           [Save Plan] [Save & Start Sprint]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Features

### Left Panel (Backlog)
- Shows stories with no sprint or sprint = "backlog"
- Filter by type (feature/bug/task/chore)
- Search by title/ID
- Sorted by epic, then priority
- Shows story points for each card

### Right Panel (Target Sprint)
- Shows stories currently in target sprint
- Capacity bar (configured or estimated)
- Running point total
- Warning if over capacity

### Drag & Drop
- Drag story card between panels
- Drop zones with visual feedback
- Multi-select support (shift-click)
- "Add Selected â†’" / "â† Remove Selected" buttons

### Capacity Tracking
- Visual progress bar
- Color coding: green (under), yellow (near), red (over)
- Point sizes: XS=1, S=2, M=3, L=5, XL=8

## Acceptance Criteria

### MVP
- [ ] Command `devstories.planSprint` opens webview
- [ ] Two-panel layout (backlog | sprint)
- [ ] Display story cards with type, ID, title, size
- [ ] Drag-drop stories between panels
- [ ] Story point tracking
- [ ] Save updates all story sprint fields
- [ ] Cancel discards changes

### Enhanced
- [ ] Filter backlog by type
- [ ] Search backlog
- [ ] Multi-select with shift-click
- [ ] Capacity configuration per sprint
- [ ] Over-capacity warning
- [ ] "Save & Start Sprint" button
- [ ] Remember panel scroll positions

## Technical Notes

### Webview Communication

```typescript
// Extension â†’ Webview
{ type: 'init', payload: { backlog: Story[], sprint: Story[], sprintId: string } }
{ type: 'storyMoved', payload: { storyId: string, to: 'backlog' | 'sprint' } }

// Webview â†’ Extension
{ type: 'moveStory', payload: { storyId: string, to: 'backlog' | 'sprint' } }
{ type: 'save' }
{ type: 'saveAndStart' }
{ type: 'cancel' }
```

### Story Point Mapping

```typescript
const POINT_MAP: Record<string, number> = {
  'XS': 1,
  'S': 2,
  'M': 3,
  'L': 5,
  'XL': 8,
};
```

### Files to Create

- `src/view/sprintPlanningView.ts`
- `webview/sprintPlanning.html`
- `webview/sprintPlanning.css`
- `webview/sprintPlanning.js`
- `src/commands/planSprint.ts`

## Test Cases

1. Open planning view for planned sprint
2. Drag story from backlog to sprint
3. Drag story from sprint to backlog
4. Multi-select and move
5. Filter backlog by type
6. Search backlog
7. Save updates story files
8. Cancel discards changes
9. Over-capacity warning shows
10. Save & Start sets sprint active
