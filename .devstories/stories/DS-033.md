---
id: DS-033
title: Load .devstories on extension activation
type: bug
epic: EPIC-001
status: todo
sprint: backlog
size: S
assignee: ""
dependencies: []
created: 2025-11-28
updated: 2025-11-28
---

# Load .devstories on extension activation

## Problem

Extension doesn't load story data on first activation. User has to save a story file first to trigger the watcher, which then initializes the store and populates the tree view.

## Expected Behavior

When VS Code opens a workspace with `.devstories/` folder:
1. Extension activates (via `workspaceContains:.devstories`)
2. Store immediately loads all stories and epics
3. Tree view populates with data
4. Board view works on first open

## Current Behavior

1. Extension activates
2. Tree view shows empty or stale data
3. User saves a story file
4. Watcher fires, store loads, tree populates

## Root Cause

Likely in `extension.ts` - the store isn't being initialized/loaded on activation. The watcher is set up but initial load is missing or async timing issue.

## Acceptance Criteria

- [ ] Store loads on extension activation
- [ ] Tree view populated immediately on activation
- [ ] Board view shows data on first open
- [ ] Works for fresh workspaces (first time opening)
- [ ] Works for returning workspaces (data should appear instantly)

## Technical Notes

Check `extension.ts` activate function:

```typescript
export async function activate(context: vscode.ExtensionContext) {
  // Ensure store.load() is called and awaited
  await store.load();  // <-- This might be missing or not awaited

  // Then set up tree view
  treeProvider.refresh();
}
```

Possible issues:
1. `store.load()` not called
2. `store.load()` called but not awaited
3. Tree view created before store loads
4. Watcher setup but no initial scan

## Files to Check

- `src/extension.ts` (activation flow)
- `src/core/store.ts` (load method)
- `src/core/watcher.ts` (initial scan)
