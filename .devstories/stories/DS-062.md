---
id: DS-062
title: Audit and harden all innerHTML assignments
type: task
epic: EPIC-012
status: done
sprint: polish-3
size: M
priority: 1
assignee: ''
dependencies: []
created: 2025-11-29T00:00:00.000Z
updated: '2025-11-30'
---

# Audit and harden all innerHTML assignments

## Description
Security audit of all innerHTML usage in webviews to prevent XSS vulnerabilities. Any user-controlled content (story titles, descriptions, epic names) must be properly escaped before rendering.

## Acceptance Criteria
- [x] Audit all innerHTML in board.js - list each usage and verify escaping
- [x] Verify escapeHtml() covers: `<`, `>`, `&`, `"`, `'`, backtick
- [x] Add unit tests for XSS edge cases (nested tags, script injection, event handlers)
- [x] Add CSP meta tag to board webview HTML template

## Decisions
- Backticks are NOT HTML special characters - they're only dangerous in JavaScript template literals. Since escapeHtml is for HTML context (innerHTML), backticks don't need escaping. Documented in code comments.
- CSP was already fully implemented in boardView.ts - verified existing implementation meets security requirements.
- Added server-side escapeHtml() to boardViewUtils.ts mirroring the webview's DOM-based approach for unit test coverage.
