---
id: DS-084
title: Frontmatter position detection utilities
type: task
epic: EPIC-018
status: todo
sprint: backlog
size: S
assignee: ""
dependencies: []
created: 2025-11-29
updated: 2025-11-29
---

# Frontmatter position detection utilities

## Description

Create utility functions to detect if cursor is within frontmatter and extract frontmatter range/content. Foundation for all intellisense features.

## Acceptance Criteria

- [ ] `getFrontmatterRange(doc)` returns Range or null
- [ ] `isInFrontmatter(doc, position)` returns boolean
- [ ] `getCurrentFieldContext(doc, position)` returns { fieldName, isValue, partialText }
- [ ] Handles edge cases: no frontmatter, unclosed frontmatter, cursor on delimiter line

## Technical Notes

- Frontmatter must start at line 0 with `---`
- Find closing `---` on its own line
- Parse partial YAML to determine current field context
- Use gray-matter for actual parsing, but line detection is custom
