---
id: DS-089
title: Format normalization on save
type: feature
epic: EPIC-018
status: todo
sprint: backlog
size: S
assignee: ""
dependencies: [DS-084]
created: 2025-11-29
updated: 2025-11-29
---

# Format normalization on save

## Description

Optional DocumentFormattingEditProvider that normalizes frontmatter syntax on save - consistent field order, array format, spacing.

## Acceptance Criteria

- [ ] Normalizes array syntax to block format (with `-` prefix)
- [ ] Ensures consistent field order: id, title, type, epic, status, sprint, size, assignee, dependencies, created, updated
- [ ] Removes trailing whitespace in frontmatter
- [ ] Preserves markdown content below frontmatter exactly
- [ ] Configurable: can be disabled in extension settings

## Technical Notes

- Register `DocumentFormattingEditProvider` for markdown
- Only format frontmatter section, pass through rest
- Use gray-matter to parse, then serialize with consistent format
- Add extension setting: `devstories.formatOnSave: boolean`
- Consider using `workspace.onWillSaveTextDocument` instead of formatter
