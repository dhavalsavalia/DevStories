---
id: DS-121
title: "Single-file frontmatter validation"
type: feature
epic: EPIC-023
status: done
sprint: 1.1.0-intellisense
size: M
priority: 200
assignee: ""
dependencies:
  - DS-120
created: 2025-11-30
updated: 2025-12-04
---

# Single-file frontmatter validation

## Description

Validate frontmatter fields within a single story/epic file. Show diagnostics (red squiggles) for errors.

## Acceptance Criteria

- [x] DiagnosticCollection registered for devstories
- [x] Validate required fields present (id, title, type, epic, status, size, created)
- [x] Validate enum values (type: feature|bug|task|chore)
- [x] Validate size against config sizes
- [x] Validate status against config statuses
- [x] Validate date format (YYYY-MM-DD)
- [x] Validate on file open, save, and change (debounced 300ms)
- [x] Invalid files still load (lenient mode) - diagnostics show warnings
- [x] Error messages are clear and actionable with line numbers

## Technical Notes

- Add `ajv` and `ajv-formats` dependencies
- Create `src/validation/frontmatterValidator.ts` - wraps Ajv with schemas
- Create `src/validation/frontmatterDiagnostics.ts` - DiagnosticCollection provider
- Reuse `isInFrontmatter()` from `storyHoverProviderUtils.ts`
- Re-validate open docs when config changes
