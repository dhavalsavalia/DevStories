---
id: DS-132
title: "Migrate pure function tests from integration to unit tests"
type: chore
epic: EPIC-INBOX
status: todo
sprint: backlog
size: M
priority: 300
assignee: ""
dependencies:
created: 2025-12-01
updated: 2025-12-01
---

# Migrate pure function tests from integration to unit tests

## Description

Many "integration" tests in `src/test/suite/` are actually testing pure functions that don't need VS Code at all. Moving them to vitest unit tests would:
- Eliminate VS Code launch overhead for those tests
- Make test runs faster
- Reserve integration tests for tests that truly need VS Code APIs

## Examples of tests to migrate

- `parseQuickInput`, `truncateForTitle`, `cleanSelectionText` (quickCapture)
- `findNextStoryId`, `generateStoryMarkdown` (createStory)
- `generateEpicMarkdown`, `findNextEpicId` (createEpic)
- `parseConfigYaml`, `parseStatusesFromConfig` (various)
- Navigation utilities, formatters, validators

## Tests that should stay as integration

- Command registration tests (`should have X command registered`)
- File watcher tests (need real FS events)
- Store tests with file system interactions
- Tests using `vscode.workspace` or `vscode.window`

## Checklist

- [ ] Audit integration tests, identify pure function tests
- [ ] Move pure function tests to vitest
- [ ] Verify integration test count drops significantly (~80+ tests movable)
- [ ] Update init.sh if integration tests become optional
