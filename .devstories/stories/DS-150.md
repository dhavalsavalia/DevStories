---
id: DS-150
title: "Hover preview for bare IDs in frontmatter"
type: feature
epic: EPIC-025
status: done
sprint: release-1.0.0
size: S
priority: 250
created: 2025-12-01
updated: 2025-12-01
---

# Hover preview for bare IDs in frontmatter

## Description

Extend hover provider to show previews for bare `DS-XXX` and `EPIC-XXX` patterns in YAML frontmatter, not just `[[ID]]` in markdown body. This makes dependency arrays hoverable without changing syntax.

## Acceptance Criteria

- [x] Hovering over `DS-XXX` in frontmatter `dependencies:` array shows story preview
- [x] Hovering over `EPIC-XXX` in frontmatter `epic:` field shows epic preview
- [x] Existing `[[ID]]` hover in markdown body still works (no regression)
- [x] Bare IDs in markdown body do NOT trigger hover (only frontmatter)
- [x] Parser logic unchanged - dependencies still stored as plain strings

## Technical Notes

**Current architecture:**
- `LINK_PATTERN` in `linkResolver.ts`: `/\[\[([A-Z]+-(?:\d+|INBOX))\]\]/g` - requires `[[]]` wrapper
- `findLinkAtPosition()` in `storyHoverProviderUtils.ts` uses `LINK_PATTERN` to find links
- `StoryHoverProvider.provideHover()` calls `findLinkAtPosition()` for all lines

**Implementation approach:**
1. Add `BARE_ID_PATTERN` in `linkResolver.ts`: `/\b([A-Z]+-(?:\d+|INBOX))\b/g` - no brackets
2. Add `isInFrontmatter(document, line)` helper to detect if cursor is in YAML block
3. Add `findBareIdAtPosition()` in `storyHoverProviderUtils.ts` using `BARE_ID_PATTERN`
4. Modify `provideHover()`:
   - If in frontmatter → use `findBareIdAtPosition()`
   - If in body → use existing `findLinkAtPosition()` (no change)
5. Rest of hover logic unchanged - reuse `formatHoverCard()`

**No regression risk because:**
- `LINK_PATTERN` unchanged - existing `[[ID]]` detection untouched
- `findLinkAtPosition()` unchanged - body hover behavior identical
- New `findBareIdAtPosition()` only called for frontmatter lines
- Parser/store logic not modified - dependencies remain plain strings

## Notes

If it helps, only do this for `epic` and `dependencies` block array.